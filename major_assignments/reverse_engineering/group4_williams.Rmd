---
title: "Reverse Engineering Project"
author: "Tim Williams, Shifra Dayak, Benjamin Ferraro"
date: "3-6-24"
output:
  html_document:
    theme: cerulean
    highlight: pygments
    toc: true
    toc_float:
      collapsed: true
      smooth_scroll: false
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Introduction

In this notebook, we are reverse engineering the story, [**Her Baby Died After Hurricane Katrina. Was it a Crime?**](https://www.themarshallproject.org/2021/12/16/her-baby-died-after-hurricane-katrina)

## Load libraries

Loading required libraries for this analysis.

```{r echo=FALSE, message=FALSE}
library(tidyverse)
library(lubridate)
library(janitor)
```

## Load and Cleaning Data

In this section, describe the source of the data, write a basic data dictionary for data you are working with, and discuss any caveats or issues you discovered working with this data.

```{r}
# Load required data

# Path to data should be loaded from folder "data" i.e. read_csv("data/name_of_data.csv")

# Clean required data and prepare for analysis if needed. 
#In OpenRefine, cleaned column names and cleaned age bucket categories (changing hyphens to "to"s).

parole <- read_csv("data/parole-cleaned-open-refine.csv")
```

## Sentences to Engineer

In this notebook, we are reverse engineering five sentences from the story.

### Sentence 1

-   **Sentence text**: "Nearly 4,200 men and women are serving lifetime sentences in the state."
-   **Analysis summary**: This is a pretty straightforward count of the anonymized Department of Corrections ID numbers for charges for those serving life sentences. A group by is needed because some prisoners have multiple charges. The exact number appears to be 4,177 people.

```{r}
# Put code to reverse engineer sentence here

# Display results of code below this codeblock
parole |>
  group_by(doc_number) |>
  summarize(count=n())
  


```

### Sentence 2

-   **Sentence text**: "More than half of the people serving life in Louisiana were convicted of second-degree murder, our investigation found ..."
-   **Analysis summary**: Filtering by the second-degree murder offense and then grouping and counting the doc numbers, we find that 2,242 of those serving life sentences have at least one second-degree murder conviction, about 54 percent of the 4,177 total.

```{r}
parole |>
  filter(offenses=="SECOND DEGREE MURDER") |>
  group_by(doc_number) |>
  summarize(count=n())
  

# Display results of code below this codeblock

```

### Sentence 3

-   **Sentence text**: "... including over three-quarters of the 124 women serving life (parole is forbidden for almost all life sentences in the state)."
-   **Analysis summary**: First we verified the number of women serving life sentences according to the data set (124). Then we counted the number of women serving such sentences with a second-degree murder conviction, using a combined filter, group by and count. 96 of the 124 women (77 percent) fit that criteria.

```{r}
# Put code to reverse engineer sentence here
parole |>
  filter(gender=="F") |>
  group_by(doc_number) |>
  summarize(count=n())
  
parole |>
  filter(offenses=="SECOND DEGREE MURDER" & gender=="F") |>
  group_by(doc_number) |>
  summarize(count=n())

# Display results of code below this codeblock

```

### Sentence 4

-   **Sentence text**: More than 70% of people serving life without parole are Black, according to our analysis of state data.
-   **Analysis summary**: A similar process of a group by and count. 3,042 people in the data set are listed as Black. 3,042 out of 4,177 total people in the set is about 73 percent.

```{r}
# Put code to reverse engineer sentence here
parole |>
  filter(race=="B") |>
  group_by(doc_number) |>
  summarize(count=n())

parole |>
  group_by(doc_number) |>
  summarize(count=n())

# Display results of code below this codeblock

```

### Sentence 5

-   **Sentence text**: [Statement in the date notebook appendix]: More than half of the people serving life without parole are between the ages of 40 and 60.
-   **Analysis summary**: The data values were listed in categories like "40 - 50." Writing code around the hyphens seemed like a pain, so we used OpenRefine to clean them. Then we added the 40 to 50 (1,091) and 50 to 60 (1,182) categories in group by counts to get 2,273 inmates, which is about 54 percent of the total inmates in the data set.

```{r}
# Put code to reverse engineer sentence here
parole |>
  filter(bucket_age=="40 to 50") |>
  group_by(doc_number) |>
  summarize(count=n())

parole |>
  filter(bucket_age=="50 to 60") |>
  group_by(doc_number) |>
  summarize(count=n())

```

-30-
